{"version":3,"sources":["src/XAxis.js"],"names":["getMouseOptions","getMouseAxisOptions","bind","XAxis","React","Component","event","onMouseMoveAxis","xScale","props","options","onMouseEnterAxis","onMouseLeaveAxis","onMouseClickAxis","getTickDomain","propsWithDefaults","defaultProps","xTickDomain","getMargin","ticksProps","labelsProps","titleProps","margins","showTicks","push","XTicks","showTitle","title","XAxisTitle","showLabels","XAxisLabels","shouldComponentUpdate","nextProps","render","width","height","position","spacingTop","spacingBottom","spacingLeft","spacingRight","tickLength","titleDistance","labelDistance","showGrid","showLine","lineStyle","gridProps","distance","labelsMargin","axisLineY","handleOnMouseMove","handleOnMouseEnter","handleOnMouseLeave","handleOnClick","PropTypes","func","number","string","placement","nice","bool","ticks","array","tickCount","titleAlign","titleRotate","titleStyle","object","labelClassName","labelStyle","oneOfType","labelFormat","labelFormats","labels","noLabelOverhang","labelOffset","tickClassName","tickStyle","gridLineClassName","gridLineStyle","onMouseClickLabel","onMouseEnterLabel","onMouseMoveLabel","onMouseLeaveLabel"],"mappings":"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","sourcesContent":["import defaults from 'lodash/defaults';\nimport isFunction from 'lodash/isFunction';\nimport upperFirst from 'lodash/upperFirst';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getAxisChildProps, getMouseAxisOptions } from './utils/Axis';\nimport { sumMargins } from './utils/Margin';\nimport { getTickDomain } from './utils/Scale';\nimport xyPropsEqual from './utils/xyPropsEqual';\nimport XAxisLabels from './XAxisLabels';\nimport XAxisTitle from './XAxisTitle';\nimport XGrid from './XGrid';\nimport XTicks from './XTicks';\n\nconst getMouseOptions = getMouseAxisOptions.bind(null, 'x');\n\n/**\n * `XAxis` is the horizontal axis of the chart. `XAxis` is a wrapper around `XGrid`, `XTicks`,\n * `XAxisLabels`, and `XAxisTitle`. See their respective docs for prop documentation.\n */\nexport default class XAxis extends React.Component {\n  static propTypes = {\n    xScale: PropTypes.func,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    position: PropTypes.string,\n    placement: PropTypes.string,\n    /**\n     * Extends the x domain to start and end on rounded values,\n     * guaranteeing the original domain will be covered.\n     * See d3 docs for more information\n     */\n    nice: PropTypes.bool,\n    ticks: PropTypes.array,\n    tickCount: PropTypes.number,\n    /**\n     * Internal top spacing of XAxis, in pixels.\n     */\n    spacingTop: PropTypes.number,\n    /**\n     * Internal bottom spacing of XAxis, in pixels.\n     */\n    spacingBottom: PropTypes.number,\n    /**\n     * Internal left spacing of XAxis, in pixels.\n     */\n    spacingLeft: PropTypes.number,\n    /**\n     * Internal right spacing of XAxis, in pixels.\n     */\n    spacingRight: PropTypes.number,\n    showTitle: PropTypes.bool,\n    showLabels: PropTypes.bool,\n    showTicks: PropTypes.bool,\n    showGrid: PropTypes.bool,\n    title: PropTypes.string,\n    titleDistance: PropTypes.number,\n    titleAlign: PropTypes.string,\n    titleRotate: PropTypes.bool,\n    titleStyle: PropTypes.object,\n    labelDistance: PropTypes.number,\n    labelClassName: PropTypes.string,\n    labelStyle: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    labelFormat: PropTypes.func,\n    labelFormats: PropTypes.array,\n    labels: PropTypes.array,\n    noLabelOverhang: PropTypes.bool,\n    /**\n     * Adds horizontal offset (along the XAxis) to the labels\n     */\n    labelOffset: PropTypes.number,\n    tickLength: PropTypes.number,\n    tickClassName: PropTypes.string,\n    tickStyle: PropTypes.object,\n    gridLineClassName: PropTypes.string,\n    gridLineStyle: PropTypes.object,\n    onMouseClickLabel: PropTypes.func,\n    onMouseEnterLabel: PropTypes.func,\n    onMouseMoveLabel: PropTypes.func,\n    onMouseLeaveLabel: PropTypes.func,\n    /**\n     * `mouseenter` event handler callback, called when user's mouse enters the x axis.\n     */\n    onMouseEnterAxis: PropTypes.func,\n    /**\n     * `mouseleave` event handler callback, called when user's mouse leaves the x axis.\n     */\n    onMouseLeaveAxis: PropTypes.func,\n    /**\n     * `mousemove` event handler callback, called when user's mouse moves within the x axis.\n     */\n    onMouseMoveAxis: PropTypes.func,\n    /**\n     * `click` event handler callback, called when user's mouse clicks on the x axis.\n     */\n    onMouseClickAxis: PropTypes.func,\n    /**\n     * Show X Axis line\n     */\n    showLine: PropTypes.bool,\n    /**\n     * Inline style object to be applied to the X Axis line\n     */\n    lineStyle: PropTypes.object,\n  };\n\n  static defaultProps = {\n    width: 400,\n    height: 250,\n    position: 'bottom',\n    nice: true,\n    showTitle: true,\n    showLabels: true,\n    showTicks: true,\n    showGrid: true,\n    tickLength: 5,\n    labelDistance: 3,\n    titleDistance: 5,\n    spacingTop: 0,\n    spacingBottom: 0,\n    spacingLeft: 0,\n    spacingRight: 0,\n    showLine: true,\n    lineStyle: {},\n  };\n\n  static getTickDomain(props) {\n    if (!props.xScale) return;\n    const propsWithDefaults = defaults({}, props, XAxis.defaultProps);\n    return {\n      xTickDomain: getTickDomain(propsWithDefaults.xScale, propsWithDefaults),\n    };\n  }\n\n  static getMargin(props) {\n    const { ticksProps, labelsProps, titleProps } = getAxisChildProps(props);\n    const margins = [];\n\n    if (props.showTicks) margins.push(XTicks.getMargin(ticksProps));\n\n    if (props.showTitle && props.title)\n      margins.push(XAxisTitle.getMargin(titleProps));\n\n    if (props.showLabels) margins.push(XAxisLabels.getMargin(labelsProps));\n\n    return sumMargins(margins, 'margin');\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !xyPropsEqual(this.props, nextProps);\n  }\n\n  handleOnMouseMove = event => {\n    const { onMouseMoveAxis, xScale } = this.props;\n\n    if (!isFunction(onMouseMoveAxis)) {\n      return;\n    }\n\n    const options = getMouseOptions(event, xScale);\n    onMouseMoveAxis(options);\n  };\n\n  handleOnMouseEnter = event => {\n    const { onMouseEnterAxis, xScale } = this.props;\n\n    if (!isFunction(onMouseEnterAxis)) {\n      return;\n    }\n\n    const options = getMouseOptions(event, xScale);\n    onMouseEnterAxis(options);\n  };\n\n  handleOnMouseLeave = event => {\n    const { onMouseLeaveAxis, xScale } = this.props;\n\n    if (!isFunction(onMouseLeaveAxis)) {\n      return;\n    }\n\n    const options = getMouseOptions(event, xScale);\n    onMouseLeaveAxis(options);\n  };\n\n  handleOnClick = event => {\n    const { onMouseClickAxis, xScale } = this.props;\n\n    if (!isFunction(onMouseClickAxis)) {\n      return;\n    }\n\n    const options = getMouseOptions(event, xScale);\n    onMouseClickAxis(options);\n  };\n\n  render() {\n    const {\n      width,\n      height,\n      position,\n      spacingTop,\n      spacingBottom,\n      spacingLeft,\n      spacingRight,\n      tickLength,\n      titleDistance,\n      labelDistance,\n      showTitle,\n      showLabels,\n      showTicks,\n      showGrid,\n      showLine,\n      lineStyle,\n    } = this.props;\n\n    const {\n      ticksProps,\n      gridProps,\n      labelsProps,\n      titleProps,\n    } = getAxisChildProps(this.props);\n\n    labelsProps.distance = labelDistance + (showTicks ? tickLength : 0);\n\n    if (showTitle && showLabels) {\n      // todo optimize so we don't generate labels twice\n      const labelsMargin = XAxisLabels.getMargin(labelsProps);\n      titleProps.distance =\n        titleDistance + labelsMargin[`margin${upperFirst(position)}`];\n    } else if (showTitle && showTicks) {\n      titleProps.distance = titleDistance + tickLength;\n    }\n\n    const axisLineY =\n      position === 'bottom' ? height + spacingBottom : -spacingTop;\n\n    return (\n      <g\n        className=\"rct-chart-axis rct-chart-axis-x\"\n        aria-hidden=\"true\"\n        onMouseMove={this.handleOnMouseMove}\n        onMouseEnter={this.handleOnMouseEnter}\n        onMouseLeave={this.handleOnMouseLeave}\n        onClick={this.handleOnClick}\n      >\n        {showGrid ? <XGrid {...gridProps} /> : null}\n\n        {showTicks ? <XTicks {...ticksProps} /> : null}\n\n        {showLabels ? <XAxisLabels {...labelsProps} /> : null}\n\n        {showTitle ? <XAxisTitle {...titleProps} /> : null}\n\n        {showLine ? (\n          <line\n            className=\"rct-chart-axis-line rct-chart-axis-line-x\"\n            x1={-spacingLeft}\n            x2={width + spacingRight}\n            y1={axisLineY}\n            y2={axisLineY}\n            style={lineStyle}\n          />\n        ) : null}\n      </g>\n    );\n  }\n}\n"],"file":"XAxis.js"}